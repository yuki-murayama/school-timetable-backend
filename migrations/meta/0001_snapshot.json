{
  "version": "6",
  "dialect": "sqlite",
  "id": "f0a92876-a7c6-4e8e-b337-59a9349095be",
  "prevId": "325029bb-f3f7-4eb2-8c3a-164ed971c9e0",
  "tables": {
    "classes": {
      "name": "classes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "grade": {
          "name": "grade",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "section": {
          "name": "section",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "student_count": {
          "name": "student_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "homeroom_teacher_id": {
          "name": "homeroom_teacher_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_class_in_school": {
          "name": "unique_class_in_school",
          "columns": [
            "school_id",
            "name"
          ],
          "isUnique": true
        },
        "class_grade_idx": {
          "name": "class_grade_idx",
          "columns": [
            "grade"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "classes_homeroom_teacher_id_teachers_id_fk": {
          "name": "classes_homeroom_teacher_id_teachers_id_fk",
          "tableFrom": "classes",
          "tableTo": "teachers",
          "columnsFrom": [
            "homeroom_teacher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "classes_school_id_schools_id_fk": {
          "name": "classes_school_id_schools_id_fk",
          "tableFrom": "classes",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "classroom_subjects": {
      "name": "classroom_subjects",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "classroom_id": {
          "name": "classroom_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "subject_id": {
          "name": "subject_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_classroom_subject": {
          "name": "unique_classroom_subject",
          "columns": [
            "classroom_id",
            "subject_id"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "classroom_subjects_classroom_id_classrooms_id_fk": {
          "name": "classroom_subjects_classroom_id_classrooms_id_fk",
          "tableFrom": "classroom_subjects",
          "tableTo": "classrooms",
          "columnsFrom": [
            "classroom_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "classroom_subjects_subject_id_subjects_id_fk": {
          "name": "classroom_subjects_subject_id_subjects_id_fk",
          "tableFrom": "classroom_subjects",
          "tableTo": "subjects",
          "columnsFrom": [
            "subject_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "classrooms": {
      "name": "classrooms",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "room_number": {
          "name": "room_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "building": {
          "name": "building",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "floor": {
          "name": "floor",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capacity": {
          "name": "capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "equipment": {
          "name": "equipment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "classroom_room_number_idx": {
          "name": "classroom_room_number_idx",
          "columns": [
            "room_number"
          ],
          "isUnique": false
        },
        "classroom_type_idx": {
          "name": "classroom_type_idx",
          "columns": [
            "type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "classrooms_school_id_schools_id_fk": {
          "name": "classrooms_school_id_schools_id_fk",
          "tableFrom": "classrooms",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "constraint_configurations": {
      "name": "constraint_configurations",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "constraint_type": {
          "name": "constraint_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_enabled": {
          "name": "is_enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 5
        },
        "parameters": {
          "name": "parameters",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_school_constraint": {
          "name": "unique_school_constraint",
          "columns": [
            "school_id",
            "constraint_type"
          ],
          "isUnique": true
        },
        "constraint_priority_idx": {
          "name": "constraint_priority_idx",
          "columns": [
            "priority"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "constraint_configurations_school_id_schools_id_fk": {
          "name": "constraint_configurations_school_id_schools_id_fk",
          "tableFrom": "constraint_configurations",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "constraint_configurations_created_by_users_id_fk": {
          "name": "constraint_configurations_created_by_users_id_fk",
          "tableFrom": "constraint_configurations",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "generation_logs": {
      "name": "generation_logs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "timetable_id": {
          "name": "timetable_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "generation_type": {
          "name": "generation_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_classes": {
          "name": "target_classes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "generation_time": {
          "name": "generation_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "constraint_violations": {
          "name": "constraint_violations",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ai_model": {
          "name": "ai_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'gemini-2.0-flash'"
        },
        "requested_by": {
          "name": "requested_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "generation_log_timetable_idx": {
          "name": "generation_log_timetable_idx",
          "columns": [
            "timetable_id"
          ],
          "isUnique": false
        },
        "generation_log_status_idx": {
          "name": "generation_log_status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "generation_log_type_idx": {
          "name": "generation_log_type_idx",
          "columns": [
            "generation_type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "generation_logs_timetable_id_timetables_id_fk": {
          "name": "generation_logs_timetable_id_timetables_id_fk",
          "tableFrom": "generation_logs",
          "tableTo": "timetables",
          "columnsFrom": [
            "timetable_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_logs_requested_by_users_id_fk": {
          "name": "generation_logs_requested_by_users_id_fk",
          "tableFrom": "generation_logs",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "schedules": {
      "name": "schedules",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "timetable_id": {
          "name": "timetable_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "class_id": {
          "name": "class_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "teacher_id": {
          "name": "teacher_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "subject_id": {
          "name": "subject_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "classroom_id": {
          "name": "classroom_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "day_of_week": {
          "name": "day_of_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "period": {
          "name": "period",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "week_type": {
          "name": "week_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'all'"
        },
        "is_substitute": {
          "name": "is_substitute",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "original_schedule_id": {
          "name": "original_schedule_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "generated_by": {
          "name": "generated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'manual'"
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_schedule": {
          "name": "unique_schedule",
          "columns": [
            "timetable_id",
            "class_id",
            "day_of_week",
            "period",
            "week_type"
          ],
          "isUnique": true
        },
        "schedule_timetable_idx": {
          "name": "schedule_timetable_idx",
          "columns": [
            "timetable_id"
          ],
          "isUnique": false
        },
        "schedule_class_idx": {
          "name": "schedule_class_idx",
          "columns": [
            "class_id"
          ],
          "isUnique": false
        },
        "schedule_teacher_idx": {
          "name": "schedule_teacher_idx",
          "columns": [
            "teacher_id"
          ],
          "isUnique": false
        },
        "schedule_time_slot_idx": {
          "name": "schedule_time_slot_idx",
          "columns": [
            "day_of_week",
            "period"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "schedules_timetable_id_timetables_id_fk": {
          "name": "schedules_timetable_id_timetables_id_fk",
          "tableFrom": "schedules",
          "tableTo": "timetables",
          "columnsFrom": [
            "timetable_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "schedules_class_id_classes_id_fk": {
          "name": "schedules_class_id_classes_id_fk",
          "tableFrom": "schedules",
          "tableTo": "classes",
          "columnsFrom": [
            "class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "schedules_teacher_id_teachers_id_fk": {
          "name": "schedules_teacher_id_teachers_id_fk",
          "tableFrom": "schedules",
          "tableTo": "teachers",
          "columnsFrom": [
            "teacher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "schedules_subject_id_subjects_id_fk": {
          "name": "schedules_subject_id_subjects_id_fk",
          "tableFrom": "schedules",
          "tableTo": "subjects",
          "columnsFrom": [
            "subject_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "schedules_classroom_id_classrooms_id_fk": {
          "name": "schedules_classroom_id_classrooms_id_fk",
          "tableFrom": "schedules",
          "tableTo": "classrooms",
          "columnsFrom": [
            "classroom_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "schedules_original_schedule_id_schedules_id_fk": {
          "name": "schedules_original_schedule_id_schedules_id_fk",
          "tableFrom": "schedules",
          "tableTo": "schedules",
          "columnsFrom": [
            "original_schedule_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "schools": {
      "name": "schools",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'middle_school'"
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "principal_name": {
          "name": "principal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'Asia/Tokyo'"
        },
        "settings": {
          "name": "settings",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "subjects": {
      "name": "subjects",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "short_name": {
          "name": "short_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "subject_code": {
          "name": "subject_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'core'"
        },
        "weekly_hours": {
          "name": "weekly_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "requires_special_room": {
          "name": "requires_special_room",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'#3498db'"
        },
        "settings": {
          "name": "settings",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "subject_code_idx": {
          "name": "subject_code_idx",
          "columns": [
            "subject_code"
          ],
          "isUnique": false
        },
        "subject_category_idx": {
          "name": "subject_category_idx",
          "columns": [
            "category"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "subjects_school_id_schools_id_fk": {
          "name": "subjects_school_id_schools_id_fk",
          "tableFrom": "subjects",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "system_settings": {
      "name": "system_settings",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'general'"
        },
        "is_public": {
          "name": "is_public",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "system_settings_key_unique": {
          "name": "system_settings_key_unique",
          "columns": [
            "key"
          ],
          "isUnique": true
        },
        "system_settings_category_idx": {
          "name": "system_settings_category_idx",
          "columns": [
            "category"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "system_settings_updated_by_users_id_fk": {
          "name": "system_settings_updated_by_users_id_fk",
          "tableFrom": "system_settings",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "teacher_subjects": {
      "name": "teacher_subjects",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "teacher_id": {
          "name": "teacher_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "subject_id": {
          "name": "subject_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "qualification_level": {
          "name": "qualification_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'qualified'"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_teacher_subject": {
          "name": "unique_teacher_subject",
          "columns": [
            "teacher_id",
            "subject_id"
          ],
          "isUnique": true
        },
        "teacher_subject_priority_idx": {
          "name": "teacher_subject_priority_idx",
          "columns": [
            "priority"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "teacher_subjects_teacher_id_teachers_id_fk": {
          "name": "teacher_subjects_teacher_id_teachers_id_fk",
          "tableFrom": "teacher_subjects",
          "tableTo": "teachers",
          "columnsFrom": [
            "teacher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "teacher_subjects_subject_id_subjects_id_fk": {
          "name": "teacher_subjects_subject_id_subjects_id_fk",
          "tableFrom": "teacher_subjects",
          "tableTo": "subjects",
          "columnsFrom": [
            "subject_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "teachers": {
      "name": "teachers",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "employee_number": {
          "name": "employee_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "specialization": {
          "name": "specialization",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "employment_type": {
          "name": "employment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'full_time'"
        },
        "max_hours_per_week": {
          "name": "max_hours_per_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "teacher_employee_number_idx": {
          "name": "teacher_employee_number_idx",
          "columns": [
            "employee_number"
          ],
          "isUnique": false
        },
        "teacher_user_idx": {
          "name": "teacher_user_idx",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "teachers_user_id_users_id_fk": {
          "name": "teachers_user_id_users_id_fk",
          "tableFrom": "teachers",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "teachers_school_id_schools_id_fk": {
          "name": "teachers_school_id_schools_id_fk",
          "tableFrom": "teachers",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "timetable_history": {
      "name": "timetable_history",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "timetable_id": {
          "name": "timetable_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "change_type": {
          "name": "change_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "change_description": {
          "name": "change_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "changed_by": {
          "name": "changed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "snapshot_data": {
          "name": "snapshot_data",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "timetable_history_version_idx": {
          "name": "timetable_history_version_idx",
          "columns": [
            "timetable_id",
            "version"
          ],
          "isUnique": false
        },
        "timetable_history_change_type_idx": {
          "name": "timetable_history_change_type_idx",
          "columns": [
            "change_type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "timetable_history_timetable_id_timetables_id_fk": {
          "name": "timetable_history_timetable_id_timetables_id_fk",
          "tableFrom": "timetable_history",
          "tableTo": "timetables",
          "columnsFrom": [
            "timetable_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "timetable_history_changed_by_users_id_fk": {
          "name": "timetable_history_changed_by_users_id_fk",
          "tableFrom": "timetable_history",
          "tableTo": "users",
          "columnsFrom": [
            "changed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "timetables": {
      "name": "timetables",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "academic_year": {
          "name": "academic_year",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "term": {
          "name": "term",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "start_date": {
          "name": "start_date",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "end_date": {
          "name": "end_date",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'draft'"
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "saturday_hours": {
          "name": "saturday_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "settings": {
          "name": "settings",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "timetable_status_idx": {
          "name": "timetable_status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "timetable_academic_year_idx": {
          "name": "timetable_academic_year_idx",
          "columns": [
            "academic_year"
          ],
          "isUnique": false
        },
        "timetable_active_idx": {
          "name": "timetable_active_idx",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "timetables_school_id_schools_id_fk": {
          "name": "timetables_school_id_schools_id_fk",
          "tableFrom": "timetables",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "timetables_created_by_users_id_fk": {
          "name": "timetables_created_by_users_id_fk",
          "tableFrom": "timetables",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "timetables_approved_by_users_id_fk": {
          "name": "timetables_approved_by_users_id_fk",
          "tableFrom": "timetables",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "user_schools": {
      "name": "user_schools",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "school_id": {
          "name": "school_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'teacher'"
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "unique_user_school": {
          "name": "unique_user_school",
          "columns": [
            "user_id",
            "school_id"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "user_schools_user_id_users_id_fk": {
          "name": "user_schools_user_id_users_id_fk",
          "tableFrom": "user_schools",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_schools_school_id_schools_id_fk": {
          "name": "user_schools_school_id_schools_id_fk",
          "tableFrom": "user_schools",
          "tableTo": "schools",
          "columnsFrom": [
            "school_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "hashed_password": {
          "name": "hashed_password",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'teacher'"
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "users_email_unique": {
          "name": "users_email_unique",
          "columns": [
            "email"
          ],
          "isUnique": true
        },
        "user_email_idx": {
          "name": "user_email_idx",
          "columns": [
            "email"
          ],
          "isUnique": false
        },
        "user_role_idx": {
          "name": "user_role_idx",
          "columns": [
            "role"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}